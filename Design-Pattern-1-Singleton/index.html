<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.19.3 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Design Pattern 1 Singleton - Continuous Learning and Sharing</title>
<meta name="description" content="Singleton probably is the most referred, and seen design pattern.">


  <meta name="author" content="Xiang Chen">


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Continuous Learning and Sharing">
<meta property="og:title" content="Design Pattern 1 Singleton">
<meta property="og:url" content="http://localhost:4000/Design-Pattern-1-Singleton/">


  <meta property="og:description" content="Singleton probably is the most referred, and seen design pattern.">







  <meta property="article:published_time" content="2020-07-01T00:00:00+01:00">





  

  


<link rel="canonical" href="http://localhost:4000/Design-Pattern-1-Singleton/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Xiang Chen",
      "url": "http://localhost:4000/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Continuous Learning and Sharing Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Continuous Learning and Sharing
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about/">About</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/profile_pic.jpeg" alt="Xiang Chen" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Xiang Chen</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Full Stack Software Engineer, Consulting Lead, Certified Scrum Master, Career Coach</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Dublin, Shenzhen</span>
        </li>
      

      
        
          
            <li><a href="mailto:chenxiang1984@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
          
            <li><a href="https://www.linkedin.com/in/xiang-chen-05161924/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">Linkedin</span></a></li>
          
        
          
        
          
            <li><a href="https://twitter.com/gnaixnehc" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span></a></li>
          
        
          
        
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Design Pattern 1 Singleton">
    <meta itemprop="description" content="Singleton probably is the most referred, and seen design pattern.">
    <meta itemprop="datePublished" content="2020-07-01T00:00:00+01:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Design Pattern 1 Singleton
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read

</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p><strong>Singleton</strong> probably is the most referred, and seen design pattern.</p>

<p><strong>Summarized in one sentence, there will one and only one initialized instance in the runtime environment.</strong></p>

<p><strong>Pros</strong></p>

<p>There will be only one initialized object in the memory, obviously this will save memory space.</p>

<p>On top of that, in the scenario where initialization is very costly, such as IO operations like estabilish DB connection, or CPU comsumption such as costly computing operation, Singleton will be a very useful design.</p>

<p><strong>Catch or Cons</strong></p>

<p>Because this single instance is shared by multiple functions, consideration need to put towards:</p>

<ul>
  <li>Does the function depend on the state of the object?</li>
  <li>Is the object safe to be used in a multithread environment?</li>
</ul>

<p>Further more, if the developer wants to use lazy load, then the consideration of concurrency is very important.</p>

<blockquote>
  <p>If I find a a good candidate when I conducted a techincal interview, I’d like to ask him or her to implement a Singleton from scratch, as it’s testing some basic Java knowledge such a private constructor, or you can dig deeper towards multithreading such as synchoronized and volatile etc.</p>
</blockquote>

<p>Here is an example with basic implementation:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="nc">Singleton</span> <span class="n">_instance</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  
  <span class="c1">// Private constructor makes sure it cannot be instantiated anywhere else</span>
  <span class="kd">private</span> <span class="nf">Singleton</span> <span class="o">()</span> <span class="o">{}</span>
  
  <span class="c1">//Lazy loading</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Singleton</span> <span class="nf">getInstance</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">_instance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
      <span class="k">this</span><span class="o">.</span><span class="na">_instance</span>  <span class="o">=</span> <span class="k">new</span> <span class="nc">Singleton</span><span class="o">();</span>
    
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">_instance</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>There will be problems if the code above is running in multi-threading environments.</p>

<p>So Double Checked Locking is introduce:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span>
  <span class="cm">/* The usage of volatile:
   1. Provide Data visiblity between threads;
   2. When CPU executes the instructions, JVM will utilize memory fence around this object and making sure there is no reordering of instructions which may lead to partially initizliaed object.
   */</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="nc">Singleton</span> <span class="n">_instance</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  
  <span class="kd">private</span> <span class="nf">Singleton</span><span class="o">()</span> <span class="o">{}</span>
  
  <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Singleton</span> <span class="nf">getInstance</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// Double Checked Locking</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">_instance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// 1. Check if it's initialized, no need to synchrozied at this step</span>
      <span class="kd">synchronized</span><span class="o">(</span><span class="k">this</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">_instance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// 2. After obtaining the lock, check again, and make sure it's not initizlied by other thread in between the previous steps.</span>
          <span class="k">this</span><span class="o">.</span><span class="na">_instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Singleton</span><span class="o">();</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">_instance</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>There are other ways to implementation on this, but I think the most important thing is the concept of this pattern.</p>

<p><strong>Singleton in Action with the Spring framework</strong></p>

<p>In the Spring framework, there is a core container called the Inversion of Control.</p>

<p>By default, a bean managed by the container is instantiated as a singleton instance, if not specified otherwise.</p>

<p>IoC takes over the management of initilization of these objects, called beans, from the implementation classes.</p>

<p>In this way, it decouples the implemenation from the detailed initilization, and focus on Interface Oriented Implementation.</p>

<blockquote>
  <p><strong>A few more thoughts</strong></p>

  <p>I once interviewed a senior developer who has years of experience working on Spring framework. When I asked about implementing a class of Singleton pattern from scratch just like above, he/she stucked and kept mentioning that Spring is using singleton that will feed them beans as singleton on the fly, and he/she doesn’t need to implement it. This actually just remind me that when I’ve been working on top of a certain framework for so long, that I’m in my comfort zone and quite easily getting into the habit of not thinking how it was implemented under the hood, and this is definitely not helpful for the professional growth.</p>
</blockquote>


        
      </section>

      <footer class="page__meta">
        
        


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2020-07-01T00:00:00+01:00">July 1, 2020</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Design+Pattern+1+Singleton%20http%3A%2F%2Flocalhost%3A4000%2FDesign-Pattern-1-Singleton%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2FDesign-Pattern-1-Singleton%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2FDesign-Pattern-1-Singleton%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/Professionalism-Starts-With-Responsibility/" class="pagination--pager" title="Professionalism Starts With Responsibility
">Previous</a>
    
    
      <a href="/No-boundaries/" class="pagination--pager" title="No Boundaries
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/The-23-Gang-of-Four-Design-Patterns/" rel="permalink">The 23 Gang Of Four Design Patterns
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  3 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">Work In Progress
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/No-boundaries/" rel="permalink">No Boundaries
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">I recently was updating my Linkedin profile, and therefore received several phone calls from some recruiters.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/Professionalism-Starts-With-Responsibility/" rel="permalink">Professionalism Starts With Responsibility
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  4 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">I recently read the book “Clean Coder” from Robert C. Martin, who is also the author of “Clean Code” which someone may refer it as the bible of the programme...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 Xiang Chen. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>










  </body>
</html>
